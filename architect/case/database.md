## 数据库

### 1.数据库范式

**1NF：**所有属性（数据项）不可再分。

**2NF：**每一个非主属性完全依赖与码

**3NF：**消除了传递依赖的2NF

---

### 2. 常见的反规范化技术
1. **增加冗余列**。指在多个表中具有相同的列，它常用来在查询时避免连接操作
2. **派生列**。指增加的列可以通过表中其他数据计算生成。它的作用是在查询时减少计算量，从而加快查询速度。
3. **重新组表**。指如果许多用户需要查看两个表连接出来的结果数据，则把这两个表重新组成一个表来减少连接而提高性能。
4. **垂直、水平分表**。

---

### 3. SQL注入攻击
SQL注入是指应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在应用程序中事先定义好的查询语句的结尾添加额外的SQL语句，在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而得到相应的数据信息。

**防御手段**：
1. 使用preparedStatement
2. 使用定义好的存储过程；
3. 严格验证用户输入，做好非法内容过滤

---

### 4.主从复制的三种模式

1. **全同步复制：**是指主库在执行完一个事务后，会等待所有的从库执行完该事务之后，才会将结果返回给客户端。<br/>这种方案的优点是数据一致性较高，但因为需要等待所有的从库执行完事务，所以性能可能会比较低。

2. **半同步复制：**是指主库在执行完一个事务后，会至少等待一个从库接收到并写入中继日志后，才将结果返回给客户端。这种方式在一定程度上保证了数据的一致性，同时也提升了性能。

3. **异步复制：**是指主库在执行完一个事务后，直接返回结果给客户端。，完全不关心从库是否收到并处理。这种方式简单性能也最好，但可能会导致主库从库之间的数据不一致。

---

### 5.分布式数据库

**特点：**
1. <mark>共享性</mark>。不同的节点的数据共享；
2. <mark>自治性</mark>。每个节点对本地的数据可以独立的管理；
3. <mark>可用性</mark>。某一场地故障时，可以使用其他场地的副本提供服务；
4. <mark>分布性</mark>。数据分布在不同的场地上存储。

**透明性：**
1. <mark>分片透明性</mark>。<br/>
    是指用户或应用程序只对全局关系进行操作，而<mark>不必考虑数据的分片</mark>；
2. <mark>位置透明性</mark>。<br/>
    是指用户或应用程序应当了解分片的情况，但<mark>不必了解分片的存储场地</mark>；
3. <mark>局部数据模型透明性</mark>。<br/>
     是指用户或者应用程序应当了解分片以及各分片的存储场地，但<mark>不必了解局部场地上使用的时何种数据模型</mark>。

---

### 6.数据库性能优化

1. **反规范化技术**<br/>
    优点：避免表之间的连接操作，提升查询性能；<br/>
    缺点：磁盘空间浪费；产生数据不一致问题。

2. **主从复制、读写分析**<br/>
    设置不同的主/从数据库分别负责不同的操作。让主数据库负责写，从数据库负责读；通过角色分担的策略，分别提升读写性能，有效减少数据并发操作的延迟。

3. **分区/分片**<br/>
    主要类型有：<mark>范围分区</mark>、<mark>列表分区</mark>、<mark>哈希分区</mark>、<mark>一致性hash算法</mark>和<mark>带虚结点的一致性hash算法</mark>，特点有：<br/>
    * 减少维护工作量；
    * 增强数据库可用性；
    * 均衡I/O，减少竞争
    * 提高查询速度

4. **分表/分库**