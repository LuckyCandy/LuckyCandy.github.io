## 数据库的规范化

### 1.基本概念
有如下两个关系模式：
* 学生（学号、姓名、性别、身份证号、教师编号）
* 教师（教师编号、姓名、工资）

|名词|概念|
|-|-|
|超键|在关系中能<mark>唯一标识</mark>元组的属性集称为关系模式的超键，可以是一个或多个属性|
|候选键|<mark>不含多余属性</mark>的超键称为候选键|
|主键|<mark>用户挑选出来用作元组标识的候选键</mark>称为主键。|
|外键|关系模式中存在的其他关系模式的主键称为外键|
|主属性|<mark>候选键中的任何一个属性</mark>都是主属性，其他为非主属性|

### 2.函数依赖
@info 设 R(U) 是在属性 U 上的关系模式，X，Y 是 U 的子集。若对于 R(U) 的任意一个可能的关系 r，r 中任意两个元组在 X 上的属性值相等，且在 Y 上的属性值也相等，则称：“X 函数确定 Y”或者“Y 函数依赖于 X”，记作：X → Y。X 称为这个函数依赖的决定属性组，也称为决定因素。

简单理解：在一个表里面，属性 X 可以映射到 Y，也就是说知道了 X，就可以找到（推导出）Y，称 X 为决定因素。<br/>比如：根据学号，可以知道姓名、成绩，学号就是决定因素。

**平凡的函数依赖：**X → Y，且 Y ⊆ X；<br/>
**非平凡的函数依赖：**X → Y，但 Y ⊈ X

---
有关系式：Student(Sno,Sdept,Mname,Cno,Grade)

|名词|概念|解释|
|-|-|-|
|完全函数依赖|(Sno,Cno) → Grade|必须知道Sno和Cno才能得到Grade|
|部分函数依赖|(Sno,Cno) → Sdept|Sno就可以知道Sdept|
|传递依赖|Sno → Sdept，Sdept → Mname|Mname传递依赖Sno|

### 3.Armstrong公理

关系式R(U,F)，U是关系模式 R 的属性集，F 是 U 上一组函数依赖。则有以下三条推理：
* 自反律：若 Y ⊆ X ⊆ U，则 X → Y 为 F 所蕴含（AB → A，平凡函数依赖）；
* 增广律：若 X → Y 为 F 所蕴含，且 Z ⊆ U，则 XZ → YZ 为 F 所蕴含；
* 传递律：若 X → Y，Y → Z 为 F 所蕴含，则 Y → Z 为 F 所蕴含。

根据上面三条，又可以推出下面的规则：
* 合并规则：若 X → Y，X → Z，则 X → YZ 为 F 所蕴含；
* 伪传递规则：若 X → Y，WY → Z，则 XW → Z 为 F 所蕴含；
* 分解规则：若 X → Y，Z ⊆ Y，则 X → Z 为 F 所蕴含。

### 4.规范化

关系型数据库设计的方法之一就是设计满足适当范式的模式，通常可以通过判断分解后的模式达到几范式来评价模式的规范化程度。

* **第一范式**：若关系模式 R 的每一个属性都不可再分，则称关系模式 R 达到了第一范式（1NF）。

* **第二范式**：若关系模式 R 符合第一范式，且非主属性完全依赖主键，则称关系模式 R 达到第二范式（2NF）。

* **第三范式**：若关系模式 R 达到了第二范式，且消除了非主属性对主键的传递函数依赖，则称关系模式 R 达到第三范式（3NF）。

### 4. 真题
[例题：]{color:red;font-weight:bold}给定关系模式 R(U,F)，其中：<br/>属性集 U = {A1,A2,A3,A4,A5,A6}，<br/>函数依赖集 F = {A1→A2,A1→A3,A3→A4,A1A5→A6}，那么：
1. 关系模式 R 的候选码为：( )
2. 关系模式 R 达到了第几范式？

[解：]{color:red;font-weight:bold}
1. 观察函数依赖集 F，得知，A1A5可以唯一表示整个元组，所以候选码为：A1A5
2. 候选码为A1A5，非主属性存在对码的部分函数依赖，达不到第二范式，属于第一范式。
