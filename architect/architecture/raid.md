## 磁盘阵列

@info 磁盘阵列(RAID，Redundant Array of Independent Disks)，是一种通过将多个磁盘组合起来形成一个逻辑单元来提高数据存储性能和数据冗余度的技术。

### 1.磁盘阵列级别
顾名思义，RAID（廉价冗余磁盘序列）。生产或使用一块较大容量的磁盘成本并不是简单的倍数关系，如此高昂的生产和使用成本如果能以另一种更加廉价且功能容量等同的方式实现，无疑成为市场的不二之选。由于不同的价值观(数据安全、空间利用等)，RAID机制中共分为8个级别，从RAID0~RAID7，RAID应用的主要技术有：<mark>分块技术、交叉技术和重聚技术</mark>。

* <mark>**RAID0**</mark><br/>数据写入时会被分为N(阵列中的磁盘数)份，并发写入到各个磁盘中，每个磁盘的数据都是真实且冗余的数据，没有设置校验数据块，读写速度超级快。<br/>理论上N块磁盘组成的RAID0级阵列的执行效率比单块磁盘速度快N倍<br/>缺点也很明显，一块磁盘出现故障，数据直接丢失。因此，如果你注重性能、容量和价格，对数据安全性要求不高，可以使用此种磁盘组合阵列。

* <mark>**RAID1**</mark><br/>也称为磁盘镜像阵列，即每个磁盘都有一个对应的镜像磁盘，上面保存着和工作盘完全相同的数据拷贝，因此具有最高的安全性，但是磁盘的空间利用率仅有50%，成本也比较高(200块钱只干100块钱的活)<br/>如此高的安全性，用来存放一些体统软件、重要数据或文件较为合适。

* **RAID2**<br/>采用了海明码纠错的磁盘阵列，在阵列中每个磁盘有设有校验数据。<br/>对于传输大量数据时有较高的性能，但对于小量数据的传输则性能较差(有种杀鸡用牛刀的感觉)

* **RAID3和RAID4**<br/>两种阵列相差不大，都采用了奇偶检验的策略（单独一个盘存放校验码，任何一个磁盘上的数据丢失，可通过对其他盘上的数据进行运算得到）。<br/>数据读取很快，但在写入时需要同时计算校验码并写入校验磁盘，速度较慢。<br/>3级采用位交叉奇偶校验码，适用于大文件且I/O不频繁的应用；<br/>4级采用块交叉奇偶校验码，适用于大文件读取。

* <mark>**RAID5**</mark><br/>使用奇偶校验吗，但没有设置独立的校验盘，校验信息分布在组内所有盘上，这就解决了RAID3或者RAID4频繁写入校验盘的问题(校验盘在每次写入时都会使用)<br/><mark>由于还是有校验位，用户能使用的磁盘容量为(N-1)块</mark><br/>

* **RAID6**<br/>在阵列中设置了一个专用的、可快速访问的异步校验盘(该盘有独立的数据访问通路)<br/>缺点是：价格昂贵，且性能改进有限。

* **RAID7**<br/>对RAID6做了改进，加入了运行实时操作系统的控制器。<br/>具有较高传输速度，性能也比较突出;缺点就是成本更高，是专利产品

* **RAID10**<br/>建立在RAID0和RAID1的基础之上，同时拥有RAID 0的超凡速度和RAID 1的数据高可靠性，但是CPU占用率同样也更高，而且磁盘的利用率比较低(50%)

### 2.考一考
题：有容量为80、80、40的三块磁盘，如果组成RAID5，那么用户可用的磁盘空间是多少？

[分析：]{color:red}<br/>
- RAID5磁盘阵列将奇偶检验存放在每个磁盘之上，N块磁盘组成的阵列用户可用的容量为：N -1<br/>
又由于三块磁盘容量有差异，根据“木桶原理”，三块磁盘的容量都可看为40

[解：]{color:red}<br/>
- (40 * (3 - 1)) = 80