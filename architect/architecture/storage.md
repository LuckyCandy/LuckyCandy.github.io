## 存储系统

### 1.内存
内存(Memory)是计算机的重要部件之一，也称**内存储器**和**主存储器**，它用于暂时存放CPU中的运算数据，与硬盘等外部存储器交换的数据，充当外存与CPU进行沟通的桥梁。

**关于内存相关的计算题目：**
例：内存按<mark>字节</mark>编址,地址从A4000H到CBFFFH，问：
1. 共有多少字节？
2. 用存储容量为32Kx8bit的存储芯片组成改内存，至少需要多少片？

[分析：]{color:red}
1. 按字节编址，一个地址有8位(1Byte = 8bit)，只需要计算地址从A4000H到CBFFFH可表示多少地址即可得到字节(按字节编址，一个地址就是一字节)。需要注意一个细节，<mark>从0到9是10个数字，在计算时不要忘记+1</mark>，即：CBFFF - A4000 + 1， 得到的结果转化为十进制结果即可；
2. 32Kx8bit的存储芯片，一个的容量就是32K，结合1问中所得答案，相除有余数+1

[解：]{color:red}
1. CBFFF - A4000 + 1 = (CBFFF + 1) - A4000 = CC000 - A4000 = 28000 = 2 * 16^4 + 8 * 16^3，<br/>为了计算简便，我们转换成KB(结果除以1024，也就是2^10)<br/>
(2 * 16^4 + 8 * 16^3) / 2^10 = (2^17 + 2^15) / 2^10 = 2^7 + 2^5 = 160K
2. 160K / 32K = 5


### 2.存储和CPU之间的关系

缓存据有容量小、速度高的特点，而内存相比之下则容量大而速度低。

如下图所示，由于**CPU**跟**内存**之间的速度悬殊，通常在**CPU**跟**内存**之间增加**高速缓存**来提高性能。<p>
<img src="/assets/imgs/architect/architecture/storage/CPU-缓存-内存之间的关系.jpg">

因为缓存的容量较小，必然会有内存内容的换进和换出。这就会遵循局部性原理，即**时间局部性**、**空间局部性**

* **时间局部性**：某段时间内会重复使用的内容不换出
* **空间局部性**：与使用中内容空间联系紧密的不换出
